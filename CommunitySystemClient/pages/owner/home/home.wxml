<!--pages/owner/home/home.wxml-->
<view class="container">
  <!-- 轮播图组件 -->
  <view class="carousel-container">
    <swiper class="carousel" indicator-dots="true" autoplay="true" interval="5000" duration="1000" circular="true" indicator-active-color="#ff6b6b" indicator-color="rgba(255,255,255,0.5)">
      <block wx:for="{{carouselImages}}" wx:key="index">
        <swiper-item class="carousel-item">
          <image src="{{item}}" mode="aspectFill" class="carousel-image"></image>
        </swiper-item>
      </block>
    </swiper>
  </view>

  <!-- 快捷功能板块 -->
  <view class="section">
    <view class="section-title">快捷功能</view>
    <view class="quick-actions">
      <view class="action-item" bindtap="navigateToNotice" catchtap="navigateToNotice">
        <view class="action-icon notification-icon">
          <image src="/img/img-home/gonggao.png" class="action-image"></image>
        </view>
        <view class="action-text">通知</view>
      </view>
      <view class="action-item" bindtap="navigateToFeedback" catchtap="navigateToFeedback">
        <view class="action-icon feedback-icon">
          <image src="/img/img-home/fankui.png" class="action-image"></image>
        </view>
        <view class="action-text">反馈</view>
      </view>
      <view class="action-item" bindtap="navigateToProfile" catchtap="navigateToProfile">
        <view class="action-icon profile-icon">
          <image src="/img/img-home/geren.png" class="action-image"></image>
        </view>
        <view class="action-text">个人</view>
      </view>
      <view class="action-item" bindtap="viewMyHouses" catchtap="viewMyHouses">
        <view class="action-icon house-icon">
          <image src="/img/img-home/fangwufangchan.png" class="action-image"></image>
        </view>
        <view class="action-text">房屋</view>
      </view>
      <view class="action-item" bindtap="viewMyVehicles" catchtap="viewMyVehicles">
        <view class="action-icon vehicle-icon">
          <image src="/img/img-home/cheliangxinxi.png" class="action-image"></image>
        </view>
        <view class="action-text">车辆</view>
      </view>
      <view class="action-item" bindtap="viewMyParkingSpaces" catchtap="viewMyParkingSpaces">
        <view class="action-icon parking-icon">
          <image src="/img/img-home/peitaosheshixiaotubiao_tingchewei.png" class="action-image"></image>
        </view>
        <view class="action-text">车位</view>
      </view>
    </view>
  </view>

  <!-- 我的房屋 -->
  <!-- <view class="section" wx:if="{{houseCards.length > 0}}">
    <view class="section-header">
      <text class="section-title">我的房屋</text>
    </view>
    <view class="list">
      <view class="list-item" wx:for="{{houseCards}}" wx:key="index" bind:tap="viewHouseDetail" data-house-id="{{item.id}}" style="cursor: pointer;">
        <view class="list-item-content">
          <view class="list-item-title">{{item.communityName}}</view>
          <view class="list-item-desc">{{item.buildingName}}{{item.roomNo}}</view>
          <view class="list-item-meta">
            <text class="meta-tag">{{item.houseType}}</text>
            <text class="meta-tag">{{item.houseStatus}}</text>
          </view>
        </view>
        <view class="list-item-arrow">></view>
      </view>
    </view>
  </view> -->

  <!-- 最新公告 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">最新公告</text>
      <view class="more-link" bindtap="navigateToNotice">查看全部 ></view>
    </view>
    <view class="notices" wx:if="{{notices.length > 0}}">
      <view class="notice-item card" wx:for="{{notices}}" wx:key="id" bindtap="viewNoticeDetail" data-id="{{item.id}}">
        <!-- 如果有图片，显示图片 -->
        <view class="notice-image-container" wx:if="{{item.noticeImages}}">
          <image 
            class="notice-image" 
            src="{{item.noticeImages}}" 
            mode="aspectFill"
            bindtap="viewNoticeDetail"
            data-id="{{item.id}}"
          />
        </view>
        <!-- 公告内容 -->
        <view class="notice-content">
          <view class="notice-top">
            <text class="notice-title">{{item.title}}</text>
            <text class="notice-type-tag" wx:if="{{item.noticeType}}">{{item.noticeType}}</text>
          </view>
          <text class="notice-desc">{{item.content}}</text>
          <view class="notice-meta">
            <text class="notice-date">{{item.publishDate}}</text>
          </view>
        </view>
      </view>
      <!-- 查看更多提示 -->
      <view class="view-all-notice" bindtap="navigateToNotice">
        <text class="view-all-text">查看更多公告</text>
        <text class="view-all-arrow">></text>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <view class="empty-icon">-</view>
      <view class="empty-text">暂无公告</view>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading" wx:if="{{loading}}">
    加载中...
  </view>
</view>

