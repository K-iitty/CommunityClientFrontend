<!--pages/owner/notice/notice.wxml-->
<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <view class="search-input-group">
      <input
        class="search-input"
        type="text"
        placeholder="搜索公告..."
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        bindconfirm="handleSearch"
      />
    </view>
  </view>

  <!-- 筛选栏 -->
  <view class="filter-bar">
    <scroll-view class="filter-scroll" scroll-x scroll-with-animation>
      <view 
        class="filter-item {{item.value === activeFilter ? 'active' : ''}}" 
        bindtap="setFilter" 
        data-filter="{{item.value}}"
        wx:for="{{filterOptions}}"
        wx:key="value">
        {{item.label}}
      </view>
    </scroll-view>
  </view>

  <!-- 公告列表 -->
  <view class="notice-list" wx:if="{{notices.length > 0}}">
    <view class="notice-card" wx:for="{{notices}}" wx:key="id" bindtap="viewDetail" data-id="{{item.id}}">
      <view class="card-header">
        <text class="notice-title">{{item.title}}</text>
        <text class="tag tag-primary">{{item.noticeType}}</text>
      </view>
      <view class="card-body">
        <text class="notice-desc">{{item.content}}</text>
      </view>
      <view class="card-footer">
        <text class="notice-time">{{item.publishTime}}</text>
        <text class="notice-arrow">></text>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:else>
    <text class="empty-icon">-</text>
    <text class="empty-text">{{searchKeyword ? '未找到匹配的公告' : '暂无公告'}}</text>
  </view>

  <!-- 加载更多 -->
  <view class="load-more" wx:if="{{notices.length > 0 && hasMore}}">
    <button class="btn-load-more" bindtap="loadMore">加载更多</button>
  </view>
</view>

