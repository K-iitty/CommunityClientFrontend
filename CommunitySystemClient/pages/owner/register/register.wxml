<!--pages/owner/register/register.wxml-->
<view class="register-container">
  <!-- æ³¨å†Œè¡¨å• -->
  <view class="register-form">
    <view class="form-header">
      <view class="header-title">æ¬¢è¿åŠ å…¥</view>
      <view class="header-subtitle">åˆ›å»ºæ‚¨çš„ä¸šä¸»è´¦æˆ·</view>
    </view>

    <!-- ç”¨æˆ·å -->
    <view class="input-group">
      <view class="input-label">ç”¨æˆ·å</view>
      <view class="input-wrapper">
        <!-- <view class="input-prefix">U</view> -->
        <input 
          class="input-field" 
          type="text" 
          placeholder="è¯·è¾“å…¥ç”¨æˆ·åï¼ˆ3-20ä½ï¼‰"
          value="{{form.username}}"
          bindinput="onUsernameInput"
          maxlength="20"
        />
        <view class="input-action" wx:if="{{form.username}}">
          <text class="status-icon" wx:if="{{usernameStatus.includes('âœ“')}}">âœ“</text>
        </view>
      </view>
      <view class="input-tip {{usernameStatus.includes('âœ“') ? 'status-success' : 'status-error'}}">{{usernameStatus}}</view>
    </view>

    <!-- å¯†ç  -->
    <view class="input-group">
      <view class="input-label">å¯†ç </view>
      <view class="input-wrapper">
        <!-- <view class="input-prefix">P</view> -->
        <input 
          class="input-field" 
          password="{{!showPassword}}" 
          placeholder="è‡³å°‘8ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—"
          value="{{form.password}}"
          bindinput="onPasswordInput"
        />
        <view class="input-action" bindtap="togglePassword" wx:if="{{form.password}}">
          <text class="eye-icon">{{showPassword ? 'ğŸ‘ï¸' : 'ğŸ”’'}}</text>
        </view>
      </view>
      <view class="input-tip {{passwordStatus.includes('âœ“') ? 'status-success' : 'status-error'}}">{{passwordStatus}}</view>
    </view>

    <!-- ç¡®è®¤å¯†ç  -->
    <view class="input-group">
      <view class="input-label">ç¡®è®¤å¯†ç </view>
      <view class="input-wrapper">
        <!-- <view class="input-prefix">P</view> -->
        <input 
          class="input-field" 
          password="{{!showConfirmPassword}}" 
          placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç "
          value="{{form.confirmPassword}}"
          bindinput="onConfirmPasswordInput"
        />
        <view class="input-action" bindtap="toggleConfirmPassword" wx:if="{{form.confirmPassword}}">
          <text class="eye-icon">{{showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ”’'}}</text>
        </view>
      </view>
      <view class="input-tip {{confirmPasswordStatus.includes('âœ“') ? 'status-success' : 'status-error'}}">{{confirmPasswordStatus}}</view>
    </view>

    <!-- åŒæ„æ¡æ¬¾ -->
    <view class="agreement-group">
      <checkbox-group bindchange="onAgreementChange">
        <label class="agreement-label">
          <checkbox value="agreed" checked="{{form.agreed}}" class="agreement-checkbox" />
          <view class="agreement-text">
            <text>æˆ‘å·²é˜…è¯»å¹¶åŒæ„</text>
            <text class="link">ç”¨æˆ·æœåŠ¡åè®®</text>
            <text>å’Œ</text>
            <text class="link">éšç§æ”¿ç­–</text>
          </view>
        </label>
      </checkbox-group>
      <view class="input-tip" wx:if="{{agreementStatus}}" style="color: #ff6b6b;">{{agreementStatus}}</view>
    </view>

    <!-- æ³¨å†ŒæŒ‰é’® -->
    <button 
      class="btn btn-primary btn-large {{isFormValid ? 'btn-active' : 'btn-disabled'}}" 
      bindtap="handleRegister"
    >
      {{loading ? 'æ³¨å†Œä¸­...' : 'åˆ›å»ºè´¦æˆ·'}}
    </button>

    <!-- è¿”å›ç™»å½• -->
    <view class="login-link">
      <text>å·²æœ‰è´¦æˆ·ï¼Ÿ</text>
      <text class="link" bindtap="handleBack">è¿”å›ç™»å½•</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-overlay">
    <view class="loading-spinner"></view>
    <text class="loading-text">æ­£åœ¨æ³¨å†Œ...</text>
  </view>
</view>
