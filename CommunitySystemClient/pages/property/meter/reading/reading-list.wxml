<!--pages/property/meter/reading/reading-list.wxml-->
<view class="page">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">{{meterName || 'æŠ„è¡¨è®°å½•'}}</view>
    <view class="btn-add" bindtap="goToAdd">+ æ–°å¢æŠ„è¡¨</view>
  </view>

  <!-- æŠ„è¡¨åˆ—è¡¨ -->
  <view class="container">
    <block wx:if="{{readings.length > 0}}">
      <view class="reading-list">
        <block wx:for="{{readings}}" wx:key="id">
          <view class="reading-card" bindtap="viewDetail" data-id="{{item.id}}">
            <!-- è¯»æ•°ä¿¡æ¯ -->
            <view class="card-header">
              <view class="reading-info">
                <view class="reading-row">
                  <text class="label">ä¸Šæ¬¡è¯»æ•°:</text>
                  <text class="value">{{item.previousReading}} å•ä½</text>
                </view>
                <view class="reading-row">
                  <text class="label">æœ¬æ¬¡è¯»æ•°:</text>
                  <text class="value highlight">{{item.currentReading}} å•ä½</text>
                </view>
                <view class="reading-row">
                  <text class="label">ç”¨é‡:</text>
                  <text class="value">{{item.usageAmount}} å•ä½</text>
                </view>
              </view>
            </view>
            <!-- æŠ„è¡¨è¯¦æƒ… -->
            <view class="card-info">
              <view class="info-row">
                <view class="label">æŠ„è¡¨å‘˜:</view>
                <view class="value">{{item.readerName || '-'}}</view>
              </view>
              <view class="info-row">
                <view class="label">æŠ„è¡¨ç±»å‹:</view>
                <view class="value">{{item.readingType || 'æ‰‹åŠ¨'}}</view>
              </view>
              <view class="info-row">
                <view class="label">æŠ„è¡¨çŠ¶æ€:</view>
                <view class="value status {{item.readingStatus === 'æ­£å¸¸' ? 'normal' : 'abnormal'}}">
                  {{item.readingStatus || 'æ­£å¸¸'}}
                </view>
              </view>
              <view class="info-row" wx:if="{{item.readingTime}}">
                <view class="label">æŠ„è¡¨æ—¶é—´:</view>
                <view class="value">{{item.readingTime}}</view>
              </view>
              <view class="info-row">
                <view class="label">æŠ„è¡¨æ—¥æœŸ:</view>
                <view class="value">{{item.readingDate}}</view>
              </view>
              <view class="info-row" wx:if="{{item.remark}}">
                <view class="label">å¤‡æ³¨:</view>
                <view class="value">{{item.remark}}</view>
              </view>
            </view>

            <!-- å›¾ç‰‡é¢„è§ˆ -->
            <view class="card-image" wx:if="{{item.readingImage}}">
              <image src="{{item.readingImage}}" mode="aspectFill"></image>
            </view>
          </view>
        </block>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <block wx:if="{{readings.length === 0 && !loading}}">
      <view class="empty-state">
        <view class="empty-icon">ğŸ“Š</view>
        <view class="empty-text">æš‚æ— æŠ„è¡¨è®°å½•</view>
      </view>
    </block>

    <!-- åŠ è½½å®Œæˆ -->
    <view wx:if="{{!hasMore && readings.length > 0}}" class="load-complete">
      å·²åŠ è½½å…¨éƒ¨è®°å½•
    </view>
  </view>
</view>